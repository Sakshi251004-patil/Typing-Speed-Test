const paragraphs = [
    "Self-confidence is a tricky subject for many people. For some, it's impossible to feel good about themselves without outside validation. When you're in a situation where the people in your life aren't helping you to feel better about yourself, this can become a problem in your day to day life. Most insecurity stems from feelings of not being attractive or feelings of loneliness. If your insecurity doesn't necessarily stem from a lack of interaction, but more a lack of feeling attractive, there are other options that will help you online. Sometimes the best way to put your insecurities to rest can simply be to get an honest opinion. There are multiple support groups online where you can share a picture of yourself with other members and they will give honest feedback on your appearance. In most cases, they will point out good qualities that you may have missed in yourself. But you can trust them to be honest and many members give very valuable style and posture advice to increase your attractiveness. These practical tips and unbiased opinions from supportive strangers will immediately help you feel better about yourself, and if the tips are implemented it will also improve your self-esteem in the long-run.",
"The Taj Mahal is the materialized vision of love and marks a perfect indelible remark on it’s Mughal Architecture. This historical monument is the mausoleum of Emperor Shan Jahan’s beloved wife, Empress Arjuman Banu Begum, most commonly known as Mumtaz mahal. The Taj Mahal is a complex comprising of the astonishing vision Ustad Isa Khan of Turkey, the chief architect of this historic monument. The Taj Mahal now holds a renowned place in UNESCO’s World Heritage Site. The tomb contains a 17-hectare centerpiece. The Taj Mahal is located 2.5 km away from the famous Agra Fort and is a renowned masterpiece of the world holds a special place as the 7th wonders in the world. About Taj Mahal, The conventional story behind the stunning 17th-century marble mausoleum is Emperor Shah Jahan’s eternal for Mumtaz, who died in childbirth. Historians believe that Shah Jahan remained heartbroken over the Empress’s death and ordered his court into mourning for two whole years. To treasure all memories of his beloved wife, Shah Jahan undertook the task of building the world’s most treasured beautiful monument as a symbol of love. The construction of the imperial structure took almost 22 solid years with the labor of 22,000 workers. However, there are a few debates that question the construction of the Taj Mahal as a monument of love or guilt. To invoke the memories of the Mughal era, a 10-day annual event called the ‘Taj Festival’ is celebrated in February, in front of the Taj Mahal.",
"As you can see in the title this is A very hard typing test text. Someone must have the worldwide record as at least 60 seconds to he put up on my typing test wall! I will be checking this page every day to see if someone got this score. Most likely I will! Me! It's very fun making these types of elaborate things because you can write whatever you want! And input commonly mispeled words! As you probably noticed by now, that mistake was on purpose. Or was it? Do your best! I will do my best. Believe in yourself. This thing is gonna repeat for hours. And hours. I'm just eating food while typing this thing up. It's ;like my 900 word essay that was required to pass one of my language arts",
"At first the professor scowled with concern. But then he said, that's all right. Run to my house. Tell my wife to give you one of my shirts. Mrs. Esputa quickly fetched one of her husband's white shirts. But when Philip put it on, she began to exclaim, Oh, dear! Gracious! The shirt was so large that Philip was almost lost in it. Hastily Mrs. Esputa found a box of pins. In a twinkling, her nimble fingers pinned enough tucks in the shirt to make it fit Philip. They both heaved a big sigh of relief when the job was finished. Then, free from anxiety, Philip hurried back to the school. The concert finally began, and soon it was time for Philip's also. Stood up, placed the violin under his chin, and raised his bow. With horror he felt a pin pulling loose in the back of his shirt. But he recalled how many pins had been inserted in the shirt and thought, Losing one won't matter. Philip started to play. At first his right arm moved back and forth slowly, then more swiftly. Before long the pins that were holding his collar pulled out, The loose, large shirt collar began to creep up the back of Philip's head. Then the unruly sleeves grew looser and longer. Suddenly the shirt fell away from his neck. The audience began to laugh. In embarrassed confusion, Philip forgot what he was playing and stopped completely. The disaster so upset him that he rushed off the stage and sulked in a dark corner. Fighting back tears, he mumbled gloomily, I wish I were dead Refreshments were served after the concert, but Philip was too busy to have any. He mingled with the crowd as quickly as he could, hoping to avoid Mr. Esputa. After a wistful look at the ice cream, Phillip was about to slink out when a booming voice behind him scoffed, Well, Philip, you made a nice mess of it.  Philip turned and found himself face to face with his glowering teacher. With no sympathy for poor Philip, Mr. Esputa continued unreasonably, No refreshments for you! You shouldn't have spent the day playing ball. You should have been preparing for the important work of the evening. You ought to be ashamed! MP hung his head, sighed heavily, and trudged home. The incident at Such an impression on him that he always remembered it. He never gain tried to mix work and play.",
"The violent battle between Israel and Palestinians in Gaza is part of the Arab-Israeli conflict, which has been going on for decades. After Israel was founded in 1948, millions of Palestinians fled their homelands and settled in the West Bank and the Gaza Strip. At that time, Gaza belonged to Egypt. In 1967, Israel occupied the area after the 6-Day War. In the decades that followed, several conflicts have arisen between Palestinians and Israelis. The Gaza Strip is a 25 mile-long area on the Mediterranean coast. Most of its 1.8 million people live in extreme poverty. Infrastructure is weak; food and electricity are often scarce. Over 40% of the Palestinians are unemployed because they cannot find any work in Gaza. Some of them travel across the border to work in Israel. The United Nations manages almost half of the schools in Gaza, but more are needed to deal with the rise in population, which is expected to grow to over 2 million by 2020. The UN also says that more and more houses and apartments are needed for people who have lost their homes during Israeli air strikes. In 2005, Israel decided to withdraw their army from the Gaza Strip in an attempt to allow Palestinians to rule themselves. It also pulled out 5000 Israelis, who settled in the region. Shortly afterwards, a terrorist organization called Hamas took power after winning general elections. Hamas does not recognise Israel as a sovereign state and wants to destroy the Jewish country. Its aim is to give Palestinians their old homeland back. In the last few years, Israel has led an all-out war against Hamas. It controls what gets in and out of Gaza at the border crossings in the east and north. Israel has set up land and sea blockades to protect itself and controls the airspace over Gaza. Egypt has closed its own border with Gaza because it is afraid that",
"NASA on Sunday launched its ambitious Parker Solar Probe a day later than it was scheduled to after multiple checks exhausted the launch window. Liftoff took place from Space Launch Complex 37 at Cape Canaveral Air Force Station in Tampa, Florida. The Parker probe is expected to come within 6.16 million kms (3.83 mn miles) of the sun, the closest a spacecraft has ever gotten to the star. The mission will last 6 years and 11 months, and in that time the Parker probe will orbit the sun 24 times. With each orbit it will push closer and closer to the sun, ultimately circling the star at a distance that is less than 10 radii of the sun. No wonder scientists consider it the coolest, hottest mission under the sun, and what better day to launch to the sun than Sunday as NASA noted. The launch was called off at the last minute on Saturday after a gaseous helium pressure red alarm emerged that the scientists did not have enough time to troubleshoot. The launch of a United Launch Alliance Delta IV Heavy rocket carrying the Parker Solar Probe spacecraft was scrubbed today due to a violation of a launch limit, resulting in a hold, Nasa, said in a statement. There was not enough time remaining in the window to recycle. The mission, that costs about $1.5 bn has been over five decades in the making, and is unique for bringing a space probe closer to the sun than any man made object. One of the reasons, scientists are sending the probe is the Sun's atmosphere and the weird property it exhibits, of being hotter than the surface of the sun itself. It is a puzzle because the further one moves from the source of heat the temperatures should fall. The other great mystery is the behaviour of 'solar wind,' a stream of charged particles emitted by the sun to",
"Fish are animals that live in water. They are vertebrates, animals with backbones, and come in all kinds of shapes, sizes and colors. Fish first appeared in the oceans of the Earth about 500 million years ago, long before dinosaurs roamed our planet. Today there are tens of thousands of different kinds of fish and new species are discovered every year. Over millions of years fish have changed their features and adapted to their surroundings in order to survive. The whale shark is the largest fish on Earth. It can grow up to 12 meters in length and can weigh up to 15 tons. In contrast tiny gobies are often only a few mm long. Fish are important to people. They were among the first animals hunted by primitive human beings. Millions of people all over the world depend on fish as a main form of nutrition. In many coastal countries, for example Japan or Norway, people depend on fishing to make a living. Fish are a part of the food chain. They eat animals and are eaten by other sea creatures, thus keeping up the balance of nature. Fish live all over the world, in the cold water of the Arctic as well as in warm tropical water around the equator. Areas rich in fish are especially around the coastal shelves of the Northern Atlantic, the Caribbean Sea and the western Pacific Ocean. Most of the world's fish live in salt water. They preferably live in areas where warm and cold currents meet. Some types live in the warm tropical waters around coral reefs. About 40% of all fish species are in fresh water. They include carp, catfish, trout or bass. Some of them live in the clear water of rivers while others prefer muddy pond water. A few types of fish can swim in both salt and fresh water. Salmon, for example, are born in fresh water, migrate",
"George Gershwin, born in 1898, was one of America's greatest composers. He published his first song when he was eighteen years old. During the next twenty years until his death in 1937 he wrote more than five hundred more songs. He also wrote an opera as well as music for piano and orchestra. Many of George Gershwin's songs were first written for musical plays performed in theatres in New York City. These comedies, mixed with plenty of songs, were a popular form of entertainment in the 1920s and 1930s. One of Gershwin's musical plays, Girl Crazy introduced a young singer named Ethel Merman, who later on became a celebrated performer in America. In the play she sang I Got Rhythm, a world hit. Many songs that Gershwin wrote for musical plays and films have remained popular as ever. Over the years they have been sung and played in every possible way-from jazz to country. In the 1920s there was a debate in the United States about jazz music. Could jazz, some people asked, be considered serious music? George Gershwin-American ComposerIn 1924 jazz musician and orchestra leader Paul Whiteman decided to organize a special concert to show that jazz was serious music. George Gershwin agreed to compose something for the concert before he realized how little time he had to do it. The concert was just a few weeks away, and Gershwin got to work. And, in that short time, he composed a piece for piano and orchestra which he called Rhapsody in Blue. Gershwin himself played the piano at that concert. The audience, made up of some of the greatest classical musicians of the time were electrified when they heard his music. Rhapsody in Blue made George Gershwin famous all over the world. He showed that jazz music could be both serious and popular. Gershwin also wrote an opera, Porgy and Bess. It is a tragic love story about Black",
"The giant panda is a bear that lives in central China. It is special because of its black and white fur. Pandas belong to the most endangered species of our world. About 2000 pandas live in the wilderness, 300 live in various zoos around the world. Recently, there have been campaigns in many countries to save the giant panda. It has been driven away from its natural habitat because of deforestation, intensive farming and the creation of new settlements. The giant panda can reach a height of up to 1.5 metres and weigh up to 150 kg. Pandas have bodies like bears, but scientists do not know why they grow a black and white fur. The thick fur keeps them warm during the cold winter months and the white colour protects them from possible enemies in the snow-covered mountains in which they live. Pandas have large teeth, which they need to eat bamboo, their basic food. The animals can eat up to 15 kg of bamboo a day. Because it is low in nutritional value it does not give pandas much energy to move around for longer periods of time. They spend most of the day roaming around and looking for food and water Giant Panda in Hong Kong A giant panda in Hong Kong-J. Patrick Fischer Giant pandas can live up to 20 years in the wilderness and 30 years in zoos. They start reproducing between 4 and 8 years of age. Mothers carry their babies in their bodies for a period of 3 to 5 months. When panda cubs are born they are blind. They are extremely tiny, only about a thousandth the size of the mother. Like all mammals, they get their food from their mother, whom they stay with for one and a half to three years before being able to survive alone. Pandas have a low birth rate. When a female gives birth to two",
];

const typingText = document.querySelector(".typing-text p")
const inpField = document.querySelector(".wrapper .input-field")
const tryAgainBtn = document.querySelector(".content button")
const timeTag = document.querySelector(".time span b")
const mistakeTag = document.querySelector(".mistake span")
const wpmTag = document.querySelector(".wpm span")
const cpmTag = document.querySelector(".cpm span")

let timer;
let maxTime = 50;
let timeLeft = maxTime;
let charIndex = mistakes = isTyping = 0;

function loadParagraph() {
    const ranIndex = Math.floor(Math.random() * paragraphs.length);
    typingText.innerHTML = "";
    paragraphs[ranIndex].split("").forEach(char => {
        console.log(char);
        let span = `<span>${char}</span>`
        typingText.innerHTML += span;
    });
    typingText.querySelectorAll("span")[0].classList.add("active");
    document.addEventListener("keydown", () => inpField.focus());
    typingText.addEventListener("click", () => inpField.focus());
}

function initTyping() {
    let characters = typingText.querySelectorAll("span");
    let typedChar = inpField.value.split("")[charIndex];
    if (charIndex < characters.length - 0 && timeLeft > 0) {
        if (!isTyping) {
            timer = setInterval(initTimer, 1000);
            isTyping = true;
        }
        if (typedChar == null) {
            if (charIndex > 0) {
                charIndex--;
                if (characters[charIndex].classList.contains("incorrect")) {
                    mistakes--;
                }
                characters[charIndex].classList.remove("correct", "incorrect");
            }
        } else {
            if (characters[charIndex].innerText == typedChar) {
                characters[charIndex].classList.add("correct");
            } else {
                mistakes++;
                characters[charIndex].classList.add("incorrect");
            }
            charIndex++;
        }
        characters.forEach(span => span.classList.remove("active"));
        characters[charIndex].classList.add("active");

        let wpm = Math.round(((charIndex - mistakes) / 5) / (maxTime - timeLeft) * 50);
        wpm = wpm < 0 || !wpm || wpm === Infinity ? 0: wpm;

        wpmTag.innerText = wpm;
        mistakeTag.innerText = mistakes;
        cpmTag.innerText = charIndex - mistakes;
    } else {
        clearInterval(timer);
        inpField.value = "";
    }
}

function initTimer() {
    if (timeLeft > 0) {
        timeLeft--;
        timeTag.innerText = timeLeft;
        let wpm = Math.round(((charIndex - mistakes) / 5) / (maxTime - timeLeft) * 50);
        wpmTag.innerText = wpm;
    } else {
        clearInterval(timer);
    }
}

function resetGame() {
    loadParagraph();
    clearInterval(timer);
    timeLeft = maxTime;
    charIndex = mistakes = isTyping = 0;
    inpField.value = "";
    timeTag.innerText = timeLeft;
    wpmTag.innerText = 0;
    mistakeTag.innerText = 0;
    cpmTag.innerText = 0;
}

loadParagraph();
inpField.addEventListener("input", initTyping);
tryAgainBtn.addEventListener("click", resetGame);